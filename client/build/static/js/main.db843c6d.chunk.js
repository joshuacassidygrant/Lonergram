(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(46)},35:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(19),l=a.n(r),i=(a(35),a(15)),c=a(14),o=a(1),u=a(5),m=a(4),d=a(2),p=a(3),h=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"row"},this.props.children)}}]),t}(n.Component),E=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"column full"},s.a.createElement("div",{className:"padded-inner"},s.a.createElement("h2",null,"About Lonergram"),s.a.createElement("blockquote",null,"Hell is other people"),s.a.createElement("p",null,"-Sartre"),s.a.createElement("p",null,"Love pictures? Hate people? Get Lonergram, the picture unsharing platform that nobody's talking about."))))}}]),t}(n.Component),f=a(21),g=a(9),b=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.props.filterChangedEvent(a.props.filterType,e.target.value)},a.render=function(){var e="filter-"+a.state.filterType;return s.a.createElement("div",{className:"filter-group"},s.a.createElement("label",null,a.state.labelText),s.a.createElement("input",{type:"range",name:e,min:"0",max:a.props.max,value:a.props.value,onChange:a.handleChange}))},a.state={labelText:a.props.labelText,filterType:a.props.filterType,value:a.props.value},a.handleChange=a.handleChange.bind(Object(g.a)(a)),a}return Object(p.a)(t,e),t}(n.Component),v=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).getStyleObject=function(e){var t="";return t+="blur(".concat(a.denormalizeBlurValue(e.blur),") "),t+="contrast(".concat(a.denormalizeContrastValue(e.contrast),") "),t+="sepia(".concat(a.denormalizeSepiaValue(e.sepia),") "),{filter:t+="hue-rotate(".concat(a.denormalizeHueShiftValue(e.hueShift),") ")}},a.denormalizeBlurValue=function(e){return e/15+"px"},a.denormalizeSepiaValue=function(e){return e/100},a.denormalizeHueShiftValue=function(e){return 3.6*e+"deg"},a.denormalizeContrastValue=function(e){return(e+1)/10},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return null==this.props.imageSource?"":s.a.createElement("img",{src:this.props.imageSource,style:this.getStyleObject(this.props.filters),alt:"Wow!"})}}]),t}(n.Component),S=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).dismiss=function(){a.props.dismissWarning()},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return!0===this.props.hidden?"":s.a.createElement("div",{className:"warning-box"},s.a.createElement("h3",null,"Warning!"),s.a.createElement("p",null,this.props.message),s.a.createElement("button",{onClick:this.dismiss},"Dismiss"))}}]),t}(n.Component),O=a(12);function y(e){return{type:"FETCH_MESSAGES_BEGIN",payload:e}}function j(e){return{type:"FETCH_MESSAGES_SUCCESS",payload:e}}function C(e){return{type:"FETCH_MESSAGES_ERROR",payload:e}}function T(e){if(!e.ok)throw Error(e.statusText);return e}var N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).defaultState=function(){return{image:null,message:"",user:"",sepia:0,hueShift:0,blur:0,contrast:1,warningHidden:!0,warningText:""}},a.render=function(){return s.a.createElement("form",{className:"message-form",id:"message-form",onSubmit:a.handleSubmit},s.a.createElement(S,{hidden:a.state.warningHidden,message:a.state.warningMessage,dismissWarning:a.dismissWarning}),s.a.createElement("div",null,"YOUR MESSAGE:",s.a.createElement("textarea",{name:"message",className:"message-input",id:"message-text",onChange:a.handleMessageChanged,value:a.state.message})),s.a.createElement("div",null,"YOUR NAME:",s.a.createElement("input",{name:"user",type:"text",id:"message-user",onChange:a.handleUserChanged,value:a.state.user})),s.a.createElement("div",null,"YOUR PHOTO:",s.a.createElement("div",{id:"message-photo-frame"},s.a.createElement(v,{filters:{sepia:a.state.sepia,hueShift:a.state.hueShift,blur:a.state.blur,contrast:a.state.contrast},imageSource:a.state.image}))),s.a.createElement("div",null,s.a.createElement("input",{type:"file",name:"image",id:"message-photo-upload",accept:"image/*",onChange:a.handleImageUpload})),s.a.createElement("div",null,"CHOOSE FILTERS:",s.a.createElement("div",{className:"filters-list"},s.a.createElement(b,{labelText:"SEPIA",filterType:"sepia",filterChangedEvent:a.handleFilterChanged,value:a.state.sepia,max:"100"}),s.a.createElement(b,{labelText:"HUE",filterType:"hueShift",filterChangedEvent:a.handleFilterChanged,value:a.state.hueShift,max:"100"}),s.a.createElement(b,{labelText:"BLUR",filterType:"blur",filterChangedEvent:a.handleFilterChanged,value:a.state.blur,max:"100"}),s.a.createElement(b,{labelText:"CONTRAST",filterType:"contrast",filterChangedEvent:a.handleFilterChanged,value:a.state.contrast,max:"6"}))),s.a.createElement("input",{type:"button",name:"clear",value:"CLEAR",onClick:a.handleClear}),s.a.createElement("input",{type:"submit",name:"submit",value:"SUBMIT"}))},a.handleSubmit=function(e){e.preventDefault(),a.dismissWarning();var t=new FormData(e.target);a.validateMessage(t)?a.captureMessage(t):a.warn("All messages must include a photo and a username!")},a.handleImageUpload=function(e){var t=e.target.files[0],n=Object(g.a)(a);if(null!=t){var s=new FileReader;s.readAsDataURL(t),s.onload=function(){n.setState({image:s.result}),n.setState({photoData:s.result})}}},a.handleFilterChanged=function(e,t){a.setState(Object(f.a)({},e,t))},a.handleMessageChanged=function(e){a.setState({message:e.target.value})},a.handleUserChanged=function(e){a.setState({user:e.target.value})},a.handleClear=function(){a.setState(a.defaultState())},a.validateMessage=function(e){return e.get("user")&&a.state.photoData},a.warn=function(e){a.setState({warningHidden:!1,warningMessage:e})},a.dismissWarning=function(){a.setState({warningHidden:!0,warningMessage:!1})},a.captureMessage=function(e){var t=(new Date).getTime(),n=t+Math.floor(100*Math.random()),s={text:e.get("message"),user:e.get("user"),time:t,_id:n,photo:a.state.photoData,filters:{sepia:e.get("filter-sepia"),contrast:e.get("filter-contrast"),hueShift:e.get("filter-hueShift"),blur:e.get("filter-blur")}};a.props.addMessage(s),a.setState(a.defaultState())},a.state=a.defaultState(),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(a)),a}return Object(p.a)(t,e),t}(n.Component),M=Object(O.b)(null,function(e){return{addMessage:function(t){return e(function(e){return function(t){var a;return t({type:"ADD_MESSAGE_BEGIN",payload:a}),fetch("http://localhost:9000/messages",{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(T).then(function(e){return e.json()}).then(function(e){return t({type:"ADD_MESSAGE_SUCCESS",payload:e}),e}).catch(function(e){console.log(e),t({type:"ADD_MESSAGE_ERROR",payload:e})})}}(t))}}})(N),w=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).handleDetails=function(){a.props.select(a.props.message)},a.handleDelete=function(){a.props.delete(a.props.message)},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"message"},s.a.createElement(v,{imageSource:this.props.message.photo,filters:this.props.message.filters}),s.a.createElement("p",null,this.props.message.text),s.a.createElement("div",{className:"from"},"-- "+this.props.message.user+" at "+new Date(this.props.message.time).toLocaleString(),"edits"in this.props.message&&this.props.message.edits.map(function(e){return s.a.createElement("div",{key:e.id},"Edited by ",e.editorName," at ",new Date(e.time).toLocaleString())})),s.a.createElement("button",{onClick:this.handleDetails},"Details"),s.a.createElement("button",{onClick:this.handleDelete},"Delete"))}}]),t}(n.Component);var x=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=a.captureMessage();a.props.editMessage(t),a.props.dismiss()},a.handleEditorNameChange=function(e){a.setState({editorName:e.target.value})},a.handleTextChange=function(e){a.setState({text:e.target.value})},a.handleFilterChanged=function(e,t){a.setState(Object(f.a)({},e,t))},a.captureMessage=function(){var e=(new Date).getTime(),t=a.props.message._id+e+Math.floor(100*Math.random()),n={editorName:a.state.editorName,id:t,time:e};return void 0===a.props.message.edits?a.props.message.edits=[n]:a.props.message.edits.push(n),{text:a.state.text,user:a.props.message.user,time:a.props.message.time,_id:a.props.message._id,edits:a.props.message.edits,photo:a.props.message.photo,filters:{sepia:a.state.sepia,contrast:a.state.contrast,hueShift:a.state.hueShift,blur:a.state.blur}}},a.state={sepia:a.props.message.filters.sepia,blur:a.props.message.filters.blur,contrast:a.props.message.filters.contrast,hueShift:a.props.message.filters.hueShift},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"column quarter"},s.a.createElement("form",null,s.a.createElement("div",null,"EDITED TEXT:",s.a.createElement("textarea",{name:"text",onChange:this.handleTextChange})),s.a.createElement("div",null,"YOUR NAME:",s.a.createElement("input",{type:"text",onChange:this.handleEditorNameChange})),s.a.createElement("div",{className:"filters-list"},s.a.createElement(b,{labelText:"SEPIA",filterType:"sepia",filterChangedEvent:this.handleFilterChanged,value:this.state.sepia,max:"100"}),s.a.createElement(b,{labelText:"HUE",filterType:"hueShift",filterChangedEvent:this.handleFilterChanged,value:this.state.hueShift,max:"100"}),s.a.createElement(b,{labelText:"BLUR",filterType:"blur",filterChangedEvent:this.handleFilterChanged,value:this.state.blur,max:"100"}),s.a.createElement(b,{labelText:"CONTRAST",filterType:"contrast",filterChangedEvent:this.handleFilterChanged,value:this.state.contrast,max:"6"})),s.a.createElement("button",{onClick:this.handleSubmit},"Submit"),s.a.createElement("button",{onClick:this.props.dismiss},"Dismiss"))),s.a.createElement("div",{className:"column three-quarter"},s.a.createElement(v,{filters:{sepia:this.state.sepia,hueShift:this.state.hueShift,blur:this.state.blur,contrast:this.state.contrast},imageSource:this.props.message.photo})))}}]),t}(n.Component),A=Object(O.b)(null,function(e){return{editMessage:function(t){return e(function(e){return function(t){var a;return t({type:"EDIT_MESSAGE_BEGIN",payload:a}),fetch("http://localhost:9000/messages/"+e._id,{method:"PUT",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(T).then(function(e){return e.json()}).then(function(e){return t({type:"EDIT_MESSAGE_SUCCESS",payload:e}),e}).catch(function(e){console.log(e),t({type:"EDIT_MESSAGE_ERROR",payload:e})})}}(t))}}})(x),D=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).dismiss=function(){e.setState({edit:!1}),e.props.dismissDetail()},e.edit=function(){e.setState({edit:!0})},e.state={edit:!1},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return!0===this.props.hidden?"":this.state.edit?s.a.createElement("div",{className:"details-box"},s.a.createElement("div",null,s.a.createElement(A,{message:this.props.message,dismiss:this.dismiss}))):s.a.createElement("div",{className:"details-box"},s.a.createElement(v,{imageSource:this.props.message.photo,filters:this.props.message.filters}),s.a.createElement("p",null,this.props.message.text),s.a.createElement("div",{className:"from"},"-- "+this.props.message.user+" at "+new Date(this.props.message.time).toLocaleString()),s.a.createElement("button",{onClick:this.dismiss}," Dismiss "),s.a.createElement("button",{onClick:this.edit}," Edit "))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).detailView=function(e){a.setState({hiddenDetailBox:!1,detailBoxMessage:e})},a.dismissDetails=function(){a.setState({hiddenDetailBox:!0})},a.deleteMessage=function(e){a.props.deleteMessage(e)},a.state={messages:null,hiddenDetailBox:!0,detailBoxMessage:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.fetchMessages()}},{key:"render",value:function(){var e=this;return null==this.props.messages?s.a.createElement("div",{className:"message-area",id:"message-scroll"},"Loading!"):this.props.messages.length<1?s.a.createElement("div",{className:"message-area",id:"message-scroll"},"Couldn't find any pictures. Why don't you add one?"):s.a.createElement("div",{className:"message-area",id:"message-scroll"},s.a.createElement(D,{hidden:this.state.hiddenDetailBox,message:this.state.detailBoxMessage,dismissDetail:this.dismissDetails}),this.props.messages.map(function(t){return s.a.createElement("div",{id:"message"+t._id,key:t._id},s.a.createElement(w,{key:t._id,message:t,select:e.detailView,delete:e.deleteMessage}))}))}}]),t}(n.Component),R=Object(O.b)(function(e){return{messages:e.messages,loading:e.loading,error:e.error}},function(e){return{deleteMessage:function(t){return e(function(e){return function(t){return t({type:"DELETE_MESSAGE_BEGIN"}),fetch("http://localhost:9000/messages/"+e._id,{method:"DELETE",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}}).then(T).then(function(e){return e.json()}).then(function(a){return t((e._id,{type:"DELETE_MESSAGE_SUCCESS"})),a}).catch(function(e){return t({type:"DELETE_MESSAGE_ERROR"})})}}(t))},fetchMessages:function(){return e(function(e){return e(y()),fetch("http://localhost:9000/messages").then(T).then(function(e){return e.json()}).then(function(t){return e(j(t)),t}).catch(function(t){return e(C(t))})})}}})(_),k=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).handleImport=function(e){var t=Object(g.a)(a),n=new FileReader;n.readAsText(e.target.files[0]),n.onload=function(){var e=n.result,a=JSON.parse(e);t.props.importMessages(a)}},a.handleExport=function(e){var t=new Blob([JSON.stringify(a.props.messages)],{type:"json"}),n=document.createElement("a");n.download="content.json",n.href=URL.createObjectURL(t),n.dataset.downloadurl=["json",n.download,n.href].join(":"),n.innerHTML="Download!",document.getElementById("download-link-holder").appendChild(n)},a.handleClear=function(){a.props.clearMessages()},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{className:"row column-borderless",id:"message-controls"},s.a.createElement("div",null,s.a.createElement("p",null,"IMPORT CONTENT:"),s.a.createElement("input",{id:"json-upload",type:"file",accept:"text/json",onChange:this.handleImport})),s.a.createElement("div",null,s.a.createElement("p",null,"EXPORT CONTENT:"),s.a.createElement("input",{type:"button",value:"EXPORT",onClick:this.handleExport})," ",s.a.createElement("span",{id:"download-link-holder"})),s.a.createElement("div",null,s.a.createElement("p",null,"CLEAR CONTENT:"),s.a.createElement("input",{type:"button",value:"CLEAR",onClick:this.handleClear})))}}]),t}(n.Component),G=Object(O.b)(function(e){return{messages:e.messages}},function(e){return{importMessages:function(t){return e({type:"IMPORT_MESSAGES",payload:t})},clearMessages:function(){return e(function(e){return e(y()),fetch("http://localhost:9000/messages",{method:"DELETE",mode:"cors",cache:"no-cache"}).then(T).then(function(e){return e.json()}).then(function(t){return e(j(t)),t}).catch(function(t){return e(C(t))})})}}})(k),I=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).switchToTab=function(t){e.setState({tabIndex:t.target.value})},e.state={tabIndex:0},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=0;return s.a.createElement("div",null,s.a.createElement("div",{className:"tab-controls"},this.props.children.map(function(a){return s.a.createElement("button",{onClick:e.switchToTab,key:t,value:t++},a.props.name)}),s.a.createElement("hr",null)),s.a.createElement("div",null,this.props.children[this.state.tabIndex]))}}]),t}(n.Component),L=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"column one-third right",id:"left-hand-column"},s.a.createElement(I,null,s.a.createElement(M,{name:"Add Message"}),s.a.createElement(G,{name:"Controls"}))),s.a.createElement("div",{className:"column two-thirds message-bg controls-collapsed"},s.a.createElement(R,null)))}}]),t}(n.Component),U=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"column full"},s.a.createElement("div",{className:"padded-inner"},s.a.createElement("h2",null,"Privacy"),s.a.createElement("blockquote",null," \u201cThree may keep a secret, if two of them are dead.\u201d"),s.a.createElement("p",null,"-Benjamin Franklin, Poor Richard's Almanack"),s.a.createElement("p",null,"At LONERGRAM, we take privacy seriously. We care so much about your privacy that we don't store ANY of your information. Ever. Don't ask us to. We won't. We're all bad people and the temptation would be too great."))))}}]),t}(n.Component),B=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("nav",{className:"navbar"},s.a.createElement(i.b,{to:"/"},"FEED"),s.a.createElement(i.b,{to:"/about"},"ABOUT"),s.a.createElement(i.b,{to:"/privacy"},"PRIVACY"))}}]),t}(n.Component),F=function(){return s.a.createElement("h1",{className:"brand"},s.a.createElement("span",{className:"c1"},"L"),s.a.createElement("span",{className:"c2"},"O"),s.a.createElement("span",{className:"c3"},"N"),s.a.createElement("span",{className:"c4"},"E"),s.a.createElement("span",{className:"c5"},"R"),s.a.createElement("span",{className:"c6"},"G"),s.a.createElement("span",{className:"c7"},"R"),s.a.createElement("span",{className:"c8"},"A"),s.a.createElement("span",{className:"c9"},"M"))},H=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("header",{className:"container",id:"nav-container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"column above right half brand-bg"},s.a.createElement(F,null)),s.a.createElement("div",{className:"column above half"},s.a.createElement(B,null))))}}]),t}(n.Component);a(45);var W=function(){return s.a.createElement("div",{className:"container",id:"main-container"},s.a.createElement(i.a,null,s.a.createElement(H,null),s.a.createElement(h,null,s.a.createElement(c.a,{path:"/",exact:!0,component:L}),s.a.createElement(c.a,{path:"/about",component:E}),s.a.createElement(c.a,{path:"/privacy",component:U}))))},P=a(17),V=a(29),z={messages:null};var J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;return"FETCH_MESSAGES_BEGIN"===t.type?Object.assign({},e,{messages:null,loading:!0}):"FETCH_MESSAGES_SUCCESS"===t.type?Object.assign({},e,{messages:t.payload,loading:!1}):"FETCH_MESSAGES_ERROR"===t.type?Object.assign({},e,{messages:null,fetchMessagesError:t.payload,loading:!1}):"ADD_MESSAGE_SUCCESS"===t.type?Object.assign({},e,{messages:e.messages.concat(t.payload)}):"ADD_MESSAGE_ERROR"===t.type?Object.assign({},e,{addMessageError:t.payload}):"EDIT_MESSAGE_SUCCESS"===t.type?Object.assign({},e,{messages:e.messages.filter(function(e){return e._id!==t.payload._id}).concat(t.payload)}):"IMPORT_MESSAGES"===t.type?Object.assign({},e,{messages:t.payload}):"CLEAR_MESSAGES"===t.type?Object.assign({},e,{messages:[]}):"DELETE_MESSAGE_SUCCESS"===t.type?Object.assign({},e,{messages:e.messages.filter(function(e){return e.id!==t.payload})}):e},Y=Object(P.c)(J,Object(P.a)(V.a));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(O.a,{store:Y},s.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,1,2]]]);
//# sourceMappingURL=main.db843c6d.chunk.js.map